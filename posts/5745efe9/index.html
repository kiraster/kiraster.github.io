<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Gogs 是一款极易搭建的自助 Git 服务。\nGogs官网：https://gogs.io/\n以下内容为本次安装过程的一个记录\n"><meta name=msvalidate.01 content="B0C0B3C5A32207C648603D179C10C991"><title>在Rocky Linux 8.7虚拟机安装Gogs的记录</title>
<link rel=canonical href=https://kiraster.github.io/posts/5745efe9/><link rel=stylesheet href=/scss/style.min.2fbaf37cb3e4bffea1a9ed32194ab6487d5a9a16f738a62ea4d92daed847b7f8.css><meta property='og:title' content="在Rocky Linux 8.7虚拟机安装Gogs的记录"><meta property='og:description' content="Gogs 是一款极易搭建的自助 Git 服务。\nGogs官网：https://gogs.io/\n以下内容为本次安装过程的一个记录\n"><meta property='og:url' content='https://kiraster.github.io/posts/5745efe9/'><meta property='og:site_name' content="Kir's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Rocky Linux'><meta property='article:tag' content='Gogs'><meta property='article:tag' content='Git服务'><meta property='article:tag' content='本地Git服务器'><meta property='article:tag' content='轻量Git服务'><meta property='article:tag' content='克隆测试'><meta property='article:published_time' content='2024-09-18T11:22:42+00:00'><meta property='article:modified_time' content='2024-09-18T11:22:42+00:00'><meta name=twitter:title content="在Rocky Linux 8.7虚拟机安装Gogs的记录"><meta name=twitter:description content="Gogs 是一款极易搭建的自助 Git 服务。\nGogs官网：https://gogs.io/\n以下内容为本次安装过程的一个记录\n"><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ2XLP4292"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZZ2XLP4292")}</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","heff72hdac")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu16060348347131247650.jpg width=300 height=283 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Kir's Blog</a></h1><h2 class=site-description>@kiraster</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/gallery/><svg viewBox="0 0 24 24" fill="none" width="24" height="24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentcolor"><path d="M15 8h.01"/><path d="M12.5 21H6a3 3 0 01-3-3V6a3 3 0 013-3h12a3 3 0 013 3v6.5"/><path d="M3 16l5-5c.928-.893 2.072-.893 3 0l4 4"/><path d="M14 14l1-1c.67-.644 1.45-.824 2.182-.54"/><path d="M16 19h6"/><path d="M19 16v6"/></svg>
<span>Gallery</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#准备环境>准备环境</a><ol><li><a href=#一台虚拟机>一台虚拟机</a></li><li><a href=#数据库>数据库</a></li><li><a href=#安装git>安装git</a></li><li><a href=#ssh服务器>SSH服务器</a></li></ol></li><li><a href=#安装必要工具和依赖>安装必要工具和依赖</a></li><li><a href=#解压下载的-tar-包>解压下载的 tar 包</a></li><li><a href=#运行gogs>运行Gogs</a></li><li><a href=#从外部访问虚拟机中gogs>从外部访问虚拟机中Gogs</a></li><li><a href=#设置-gogs-服务开机启动>设置 Gogs 服务开机启动</a></li><li><a href=#外部仓库克隆测试>外部仓库克隆测试</a></li><li><a href=#再次进行初始化>再次进行初始化</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/linux/ style=background-color:#6e7b8b;color:#fff>Linux</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/5745efe9/>在Rocky Linux 8.7虚拟机安装Gogs的记录</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 18, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>4 minute read</time></div></footer></div></header><section class=article-content><p>Gogs 是一款极易搭建的自助 Git 服务。</p><p>Gogs官网：https://gogs.io/</p><p>以下内容为本次安装过程的一个记录</p><h2 id=准备环境>准备环境</h2><p>按照官方文档指示的环境要求处理， <a class=link href=https://gogs.io/docs/installation target=_blank rel=noopener>https://gogs.io/docs/installation
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><h3 id=一台虚拟机>一台虚拟机</h3><ul><li><p>选择你熟悉和中意的linux，不必在意我以下使用的发行版（留了模板）</p></li><li><p>此处选用<code>Rocky8.7</code>是因为本机VMware里躺着一个虚拟机模版，果断完整克隆一份（省时）</p></li><li><p>传闻消耗资源少？，就分个2核1G内存的丐版（不够再加）</p></li><li><p>配置静态IP地址， 配置可连接互联网（基操）</p></li><li><p>虚拟机硬件资源配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost /]# lscpu | grep -E &#39;CPU|Core&#39;
</span></span><span class=line><span class=cl>CPU op-mode(s):      32-bit, 64-bit
</span></span><span class=line><span class=cl>CPU(s):              2
</span></span><span class=line><span class=cl>On-line CPU(s) list: 0,1
</span></span><span class=line><span class=cl>Core(s) per socket:  2
</span></span><span class=line><span class=cl>CPU family:          16
</span></span><span class=line><span class=cl>CPU MHz:             3013.536
</span></span><span class=line><span class=cl>NUMA node0 CPU(s):   0,1
</span></span><span class=line><span class=cl>[root@localhost /]# free -h
</span></span><span class=line><span class=cl>              total        used        free      shared  buff/cache   available
</span></span><span class=line><span class=cl>Mem:          777Mi       284Mi        78Mi       3.0Mi       413Mi       358Mi
</span></span><span class=line><span class=cl>Swap:         2.0Gi       8.0Mi       2.0Gi
</span></span><span class=line><span class=cl>[root@localhost /]# 
</span></span></code></pre></div></li></ul><h3 id=数据库>数据库</h3><p>跳过此项，使用sqlite</p><h3 id=安装git>安装git</h3><ol><li><p>检查是否安装Git，如发现已安装，检查版本是否满足环境要求所需版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost ~]# git
</span></span><span class=line><span class=cl>-bash: git: command not found
</span></span></code></pre></div></li><li><p>安装git</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>dnf update 
</span></span><span class=line><span class=cl>dnf install git -y
</span></span><span class=line><span class=cl>……
</span></span><span class=line><span class=cl>[root@localhost ~]# git --version
</span></span><span class=line><span class=cl>git version 2.43.5
</span></span></code></pre></div></li></ol><h3 id=ssh服务器>SSH服务器</h3><p>该版本已安装ssh服务，可远程ssh登陆（不懂是之前手动安装的还是系统自带的，不重要）</p><h2 id=安装必要工具和依赖>安装必要工具和依赖</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost ~]# tar --version
</span></span><span class=line><span class=cl>tar (GNU tar) 1.30
</span></span><span class=line><span class=cl>Copyright (C) 2017 Free Software Foundation, Inc.
</span></span><span class=line><span class=cl>License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
</span></span><span class=line><span class=cl>This is free software: you are free to change and redistribute it.
</span></span><span class=line><span class=cl>There is NO WARRANTY, to the extent permitted by law.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Written by John Gilmore and Jay Fenlason.
</span></span><span class=line><span class=cl>[root@localhost ~]# wget --version
</span></span><span class=line><span class=cl>GNU Wget 1.19.5 built on linux-gnu.
</span></span></code></pre></div><p>经过检查，系统已安装tar和wget，如未安装，使用如下命令安装</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>dnf install wget tar
</span></span><span class=line><span class=cl>……
</span></span></code></pre></div><p>##　下载Gogs二进制源码</p><ol><li><p><code>/opt </code>路径下创建Gogs目录，用于存放源码文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd /opt
</span></span><span class=line><span class=cl>mkdir Gogs_0.13.0
</span></span><span class=line><span class=cl>……
</span></span><span class=line><span class=cl>[root@localhost opt]# ll
</span></span><span class=line><span class=cl>total 0
</span></span><span class=line><span class=cl>drwxr-xr-x. 2 root root 6 Sep 17 05:14 Gogs_0.13.0
</span></span><span class=line><span class=cl>[root@localhost opt]# 
</span></span></code></pre></div></li><li><p>wget下载二进制源码（当前日期20240917最新github release 版本）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>gogs</span><span class=o>/</span><span class=n>gogs</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>v0</span><span class=o>.</span><span class=mf>13.0</span><span class=o>/</span><span class=n>gogs_0</span><span class=o>.</span><span class=mf>13.0</span><span class=n>_linux_amd64</span><span class=o>.</span><span class=n>tar</span><span class=o>.</span><span class=n>gz</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 发现从github下载速度慢，从官网 https://dl.gogs.io/0.13.0/ 下载</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>dl</span><span class=o>.</span><span class=n>gogs</span><span class=o>.</span><span class=n>io</span><span class=o>/</span><span class=mf>0.13</span><span class=o>.</span><span class=mi>0</span><span class=o>/</span><span class=n>gogs_0</span><span class=o>.</span><span class=mf>13.0</span><span class=n>_linux_amd64</span><span class=o>.</span><span class=n>tar</span><span class=o>.</span><span class=n>gz</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=n>localhost</span> <span class=n>Gogs_0</span><span class=o>.</span><span class=mf>13.0</span><span class=p>]</span><span class=c1># ll</span>
</span></span><span class=line><span class=cl><span class=n>total</span> <span class=mi>29352</span>
</span></span><span class=line><span class=cl><span class=o>-</span><span class=n>rw</span><span class=o>-</span><span class=n>r</span><span class=o>--</span><span class=n>r</span><span class=o>--.</span> <span class=mi>1</span> <span class=n>root</span> <span class=n>root</span> <span class=mi>30054955</span> <span class=n>Feb</span> <span class=mi>25</span>  <span class=mi>2023</span> <span class=n>gogs_0</span><span class=o>.</span><span class=mf>13.0</span><span class=n>_linux_amd64</span><span class=o>.</span><span class=n>tar</span><span class=o>.</span><span class=n>gz</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=n>localhost</span> <span class=n>Gogs_0</span><span class=o>.</span><span class=mf>13.0</span><span class=p>]</span><span class=c1># </span>
</span></span></code></pre></div></li></ol><h2 id=解压下载的-tar-包>解压下载的 tar 包</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost Gogs_0.13.0]# tar -xzf gogs_0.13.0_linux_amd64.tar.gz 
</span></span><span class=line><span class=cl>[root@localhost Gogs_0.13.0]# ll
</span></span><span class=line><span class=cl>total 29352
</span></span><span class=line><span class=cl>drwxrwxr-x. 3 1000 1000       85 Feb 25  2023 gogs
</span></span><span class=line><span class=cl>-rw-r--r--. 1 root root 30054955 Feb 25  2023 gogs_0.13.0_linux_amd64.tar.gz
</span></span><span class=line><span class=cl>[root@localhost Gogs_0.13.0]#
</span></span></code></pre></div><h2 id=运行gogs>运行Gogs</h2><ol><li><p>防火墙设置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=c1># 确保允许访问 Gogs 使用的端口（默认是 3000）,主要使用物理机访问使用，且我这Rocky8.7没安装图形界面，所以……</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>firewall</span><span class=o>-</span><span class=n>cmd</span> <span class=o>--</span><span class=n>permanent</span> <span class=o>--</span><span class=n>add</span><span class=o>-</span><span class=n>port</span><span class=o>=</span><span class=mi>3000</span><span class=o>/</span><span class=n>tcp</span>
</span></span><span class=line><span class=cl><span class=n>firewall</span><span class=o>-</span><span class=n>cmd</span> <span class=o>--</span><span class=n>reload</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修改实际使用的端口号，下一步骤中修改30000，当然使用3000也是可以的</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>firewall</span><span class=o>-</span><span class=n>cmd</span> <span class=o>--</span><span class=n>permanent</span> <span class=o>--</span><span class=n>add</span><span class=o>-</span><span class=n>port</span><span class=o>=</span><span class=mi>30000</span><span class=o>/</span><span class=n>tcp</span>
</span></span><span class=line><span class=cl><span class=n>firewall</span><span class=o>-</span><span class=n>cmd</span> <span class=o>--</span><span class=n>reload</span>
</span></span></code></pre></div></li><li><p>使用命令 <code>cd</code> 进入到解压后的目录。</p></li><li><p>执行命令 <code>./gogs web</code>。</p></li><li><p>Gogs 默认会在端口 <code>3000</code> 启动 HTTP 服务，访问 <code>/install</code> 以进行初始配置（例如 http://localhost:3000/install ）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost gogs]# ./gogs web
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [ WARN] Custom config &#34;/opt/Gogs_0.13.0/gogs/custom/conf/app.ini&#34; not found. Ignore this warning if you&#39;re running for the first time
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Log mode: Console (Trace)
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [ INFO] Gogs 0.13.0
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Work directory: /opt/Gogs_0.13.0/gogs
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Custom path: /opt/Gogs_0.13.0/gogs/custom
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Custom config: /opt/Gogs_0.13.0/gogs/custom/conf/app.ini
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Log path: /opt/Gogs_0.13.0/gogs/log
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Build time: 2023-02-25 02:30:34 UTC
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [TRACE] Build commit: 8c21874c00b6100d46b662f65baeb40647442f42
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [ INFO] Run mode: Development
</span></span><span class=line><span class=cl>2024/09/17 05:44:24 [ INFO] Available on http://localhost:3000/
</span></span></code></pre></div></li></ol><h2 id=从外部访问虚拟机中gogs>从外部访问虚拟机中Gogs</h2><ol><li><p>访问 <code>/install</code> 以进行初始配置（例如 <a class=link href=http://172.31.100.xx:3000/install target=_blank rel=noopener>http://172.31.100.xx:3000/install
<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>）,可以自由发挥（以下是我的配置）</p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/13LyVlzKSFjtUbD.jpg><img src=https://s2.loli.net/2024/09/18/13LyVlzKSFjtUbD.jpg loading=lazy alt=ScreenCaputure3638></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/LU64HDirj9aOnk3.jpg><img src=https://s2.loli.net/2024/09/18/LU64HDirj9aOnk3.jpg loading=lazy alt=ScreenCaputure4848></a></div></p><p><strong>上面配置中邮件服务留空了，本地没有邮件服务器，也不想联网</strong></p><p><strong>上面配置中的创建管理员用户可以不设置，第一个注册的用户自动成为管理员，我在此处截胡了</strong></p><p><strong>没有邮件服务，引起的问题：用户不能通过邮箱找回密码，需要管理员用户重置</strong></p></li><li><p>重启Gogs，进行登陆</p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/eSBrWzUCOPcDopT.jpg><img src=https://s2.loli.net/2024/09/18/eSBrWzUCOPcDopT.jpg loading=lazy alt=ScreenCaputure5350></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/NIqsjCHUPJogcSD.jpg><img src=https://s2.loli.net/2024/09/18/NIqsjCHUPJogcSD.jpg loading=lazy alt=ScreenCaputure5446></a></div></p></li><li><p>中文显示</p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/sEQJU2wPd1XWI7C.jpg><img src=https://s2.loli.net/2024/09/18/sEQJU2wPd1XWI7C.jpg loading=lazy alt=ScreenCaputure5638></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/Dg6ETvwxOZFCHMt.jpg><img src=https://s2.loli.net/2024/09/18/Dg6ETvwxOZFCHMt.jpg loading=lazy alt=ScreenCaputure5824></a></div></p></li></ol><h2 id=设置-gogs-服务开机启动>设置 Gogs 服务开机启动</h2><ol><li><p>将<code>/opt/Gogs_0.13.0/gogs/scripts/systemd</code>路径下的<code>gogs.service</code>文件复制到<code>/etc/systemd/system</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost systemd]# cp gogs.service /etc/systemd/system 
</span></span></code></pre></div></li><li><p>修改<code>/etc/systemd/system</code>路径下的<code>gogs.service</code>文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>Description=Gogs
</span></span><span class=line><span class=cl>After=syslog.target
</span></span><span class=line><span class=cl>After=network.target
</span></span><span class=line><span class=cl># After=mariadb.service mysql.service mysqld.service postgresql.service memcached.service $
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl># Modify these two values and uncomment them if you have
</span></span><span class=line><span class=cl># repos with lots of files and get an HTTP error 500 because
</span></span><span class=line><span class=cl># of that
</span></span><span class=line><span class=cl>###
</span></span><span class=line><span class=cl>#LimitMEMLOCK=infinity
</span></span><span class=line><span class=cl>#LimitNOFILE=65535
</span></span><span class=line><span class=cl>Type=simple
</span></span><span class=line><span class=cl>User=root
</span></span><span class=line><span class=cl>Group=root
</span></span><span class=line><span class=cl>WorkingDirectory=/opt/Gogs_0.13.0/gogs
</span></span><span class=line><span class=cl>ExecStart=/opt/Gogs_0.13.0/gogs/gogs web
</span></span><span class=line><span class=cl>Restart=always
</span></span><span class=line><span class=cl># Environment=USER=git HOME=/home/root
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Some distributions may not support these hardening directives. If you cannot start the s$
</span></span><span class=line><span class=cl># to an unknown option, comment out the ones not supported by your version of systemd.
</span></span><span class=line><span class=cl>ProtectSystem=full
</span></span><span class=line><span class=cl>PrivateDevices=yes
</span></span><span class=line><span class=cl>PrivateTmp=yes
</span></span><span class=line><span class=cl>NoNewPrivileges=true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=multi-user.target
</span></span></code></pre></div></li><li><p>重新加载 systemd 配置并启动 Gogs 服务</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>start</span> <span class=n>gogs</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>enable</span> <span class=n>gogs</span>
</span></span></code></pre></div></li></ol><h2 id=外部仓库克隆测试>外部仓库克隆测试</h2><p>以https方式 git clone 一个仓库至本地，（github把https方式克隆仓库给ban了，现在都需要验证，去gitee克隆）</p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/QbcJGNxt2U7wBDA.jpg><img src=https://s2.loli.net/2024/09/18/QbcJGNxt2U7wBDA.jpg loading=lazy alt=ScreenCaputure0823></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2024/09/18/goN6IM5VJCRDSL1.jpg><img src=https://s2.loli.net/2024/09/18/goN6IM5VJCRDSL1.jpg loading=lazy alt=ScreenCaputure0907></a></div></p><h2 id=再次进行初始化>再次进行初始化</h2><p>种种原因可能需要再次进行初始化（比如修改数据库，更改管理员等）</p><ol><li><p>删除/root/gogs-repositories 目录</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost ~]# rm -rf gogs-repositories/
</span></span></code></pre></div></li><li><p>删除/opt/Gogs_0.13.0/gogs 目录</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost Gogs_0.13.0]# rm -rf gogs
</span></span></code></pre></div></li><li><p>再次解压，运行Gogs</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@localhost gogs]# ./gogs web
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [ WARN] Custom config &#34;/opt/Gogs_0.13.0/gogs/custom/conf/app.ini&#34; not found. Ignore this warning if you&#39;re running for the first time
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Log mode: Console (Trace)
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [ INFO] Gogs 0.13.0
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Work directory: /opt/Gogs_0.13.0/gogs
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Custom path: /opt/Gogs_0.13.0/gogs/custom
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Custom config: /opt/Gogs_0.13.0/gogs/custom/conf/app.ini
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Log path: /opt/Gogs_0.13.0/gogs/log
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Build time: 2023-02-25 02:30:34 UTC
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [TRACE] Build commit: 8c21874c00b6100d46b662f65baeb40647442f42
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [ INFO] Run mode: Development
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [ INFO] Available on http://localhost:3000/
</span></span><span class=line><span class=cl>2024/09/17 12:12:01 [FATAL] [gogs.io/gogs/internal/cmd/web.go:776 runWeb()] Failed to start server: listen tcp 0.0.0.0:3000: bind: address already in use
</span></span><span class=line><span class=cl>[root@localhost gogs]# 
</span></span></code></pre></div></li><li><p>提示端口已经在使用，关闭进程或重启系统解决</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 查找进程ID，终止进程
</span></span><span class=line><span class=cl>[root@localhost gogs]# lsof -i :3000
</span></span><span class=line><span class=cl>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
</span></span><span class=line><span class=cl>gogs    1543 root   10u  IPv6  29519      0t0  TCP *:hbci (LISTEN)
</span></span><span class=line><span class=cl>[root@localhost gogs]# kill 1543
</span></span><span class=line><span class=cl>[root@localhost gogs]# lsof -i :3000
</span></span><span class=line><span class=cl>[root@localhost gogs]# 
</span></span></code></pre></div></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/rocky-linux/>Rocky Linux</a>
<a href=/tags/gogs/>Gogs</a>
<a href=/tags/git%E6%9C%8D%E5%8A%A1/>Git服务</a>
<a href=/tags/%E6%9C%AC%E5%9C%B0git%E6%9C%8D%E5%8A%A1%E5%99%A8/>本地Git服务器</a>
<a href=/tags/%E8%BD%BB%E9%87%8Fgit%E6%9C%8D%E5%8A%A1/>轻量Git服务</a>
<a href=/tags/%E5%85%8B%E9%9A%86%E6%B5%8B%E8%AF%95/>克隆测试</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/297bc3bd/><div class=article-details><h2 class=article-title>Rocky Linux 8.7 Flask应用docker容器化</h2></div></a></article><article><a href=/posts/f652ccc4/><div class=article-details><h2 class=article-title>CentOS-8.0.1905 安装配置图形化桌面环境和TigerVNC(离线安装)</h2></div></a></article><article><a href=/posts/a451a5f2/><div class=article-details><h2 class=article-title>CentOS-8.0.1905 安装配置图形化桌面环境和TigerVNC(在线安装)</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 <a href=https://github.com/kiraster target=_blank rel=noopener>@kiraster</a></section><section class=powerby><a href=https://github.com/kiraster target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a> <a href=https://space.bilibili.com/11565094 target=_blank title=Bilibili rel=me><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"><path d="M3 10a4 4 0 014-4h10a4 4 0 014 4v6a4 4 0 01-4 4H7a4 4 0 01-4-4v-6z"/><path d="M8 3l2 3"/><path d="M16 3l-2 3"/><path d="M9 13v-2"/><path d="M15 11v2"/></svg></a> <a href=mailto:kir_aster@foxmail.com target=_blank title=Email rel=me><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a> <a href=https://kiraster.github.io/index.xml target=_blank title=RSS rel=me><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"><path d="M5 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){var t,e=window;if(e.ChannelIO)return e.console.error("ChannelIO script included twice.");t=function(){t.c(arguments)},t.q=[],t.c=function(e){t.q.push(e)},e.ChannelIO=t;function n(){if(e.ChannelIOInitialized)return;e.ChannelIOInitialized=!0;var n,t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://cdn.channel.io/plugin/ch-plugin-web.js",n=document.getElementsByTagName("script")[0],n.parentNode&&n.parentNode.insertBefore(t,n)}document.readyState==="complete"?n():(e.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))})(),ChannelIO("boot",{pluginKey:"c7466ff8-ad03-4587-a1c8-13aeaf17e007"})</script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js integrity=sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css integrity=sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE crossorigin=anonymous><script>NProgress.start(),document.addEventListener("readystatechange",()=>{document.readyState==="interactive"&&NProgress.inc(.8),document.readyState==="complete"&&NProgress.done()})</script><script>document.addEventListener("DOMContentLoaded",function(){jQuery(function(e){e("[data-fancybox]").fancybox()})})</script></body></html>