<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
<meta charset="utf-8">
<title>IPv6 各隧道Tunnel使用Lab - Kir&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<meta name="description" content="Kir的博客，网络设备配置，网络拓扑实验，华为华三路由交换无线安全HCIP,CISCO,NETWORK">


<meta name="keywords" content="Kir的博客，网络设备配置，网络拓扑实验，华为华三路由交换无线安全HCIP,CISCO,NETWORK">


    <meta name="description" content="最近看了很多关于 IPv6 的内容。老早前，大概2000年前后运营商就开始研究推进发展 IPv6 网络技术了，可能是是由于某些我等不知道的原因，这个推进的进程所演化出的表象让我等普通网民没什么感觉。部分科研机构、高校、金融、IT 大厂已经在使用了，一个比较大的使用群体也就是家用部分普及的不大开（我猜的，没有依据）。 IPv6 相对于 IPv4 有种种的优势，我最有印象的几个是没有广播这个概念、“真">
<meta property="og:type" content="article">
<meta property="og:title" content="IPv6 各隧道Tunnel使用Lab">
<meta property="og:url" content="https://kiraster.github.io/posts/2e964a67.html">
<meta property="og:site_name" content="Kir&#39;s Blog">
<meta property="og:description" content="最近看了很多关于 IPv6 的内容。老早前，大概2000年前后运营商就开始研究推进发展 IPv6 网络技术了，可能是是由于某些我等不知道的原因，这个推进的进程所演化出的表象让我等普通网民没什么感觉。部分科研机构、高校、金融、IT 大厂已经在使用了，一个比较大的使用群体也就是家用部分普及的不大开（我猜的，没有依据）。 IPv6 相对于 IPv4 有种种的优势，我最有印象的几个是没有广播这个概念、“真">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2022/05/02/WqsFfpynmbOgCe1.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/wdq98eSpnQIomMu.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/pNRlmzbMueHx4ci.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/T6NrPOZoiJQsqcG.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/KZQrajkhO8iqm2R.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/3FZM1b8tQGxf7js.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/zGR5jO2XhyDNk9w.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/pt6MgExKAVrh7Jc.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/EiJG1AeWxF2Chwp.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/lCnirqdHXLAPzOI.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/CpJV95worZjDeq6.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/Pogt8efnYlw7hVS.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/OgaZPtVnw1ovWqm.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/dJxVzWU75PaS4pM.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/4kKtLZCPviFn1XE.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/UrGM7mXeSuRFJOx.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/LSMXYa1GTCRV85A.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/kjEiPofQ8HVKc3t.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/kfljUI6ZwMCFcBm.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/MvtomBCDQfGwuZ9.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/b9VUl7PrZRnWM1K.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/03/x8Bg5QzJmsL6fUP.png">
<meta property="article:published_time" content="2022-04-02T23:18:36.000Z">
<meta property="article:modified_time" content="2023-02-14T08:59:47.194Z">
<meta property="article:author" content="Kir Aster">
<meta property="article:tag" content="Network Emulator">
<meta property="article:tag" content="PNETLab">
<meta property="article:tag" content="Cisco">
<meta property="article:tag" content="IPv6">
<meta property="article:tag" content="PD">
<meta property="article:tag" content="Manual Tunnel">
<meta property="article:tag" content="6to4 Tunnel">
<meta property="article:tag" content="GRE Tunnel">
<meta property="article:tag" content="6RD Tunnel">
<meta property="article:tag" content="ISATAP Tunnel">
<meta property="article:tag" content="mGRE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/05/02/WqsFfpynmbOgCe1.png">



<link rel="icon" href="https://s2.loli.net/2022/11/07/nR4jdLTGEq6kZ2S.png">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<!--引入思源黑体 rel-->
<link rel="preconnect" href="https://fonts.proxy.ustclug.org">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.proxy.ustclug.org/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

    
    
    
    
    
    
    
    
    
    
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3a4045a27e1262a56b8fe2f8b7b42ff1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-209914470-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-209914470-1');
</script>


    

<meta name="generator" content="Hexo 6.3.0"></head>
<body>

<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    Kir&#39;s
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/gallery">Gallery</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#Start">1&nbsp;&nbsp;<b>Start</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Design-amp-Configuration">2&nbsp;&nbsp;<b>Design &amp;amp; Configuration</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#A-head-配置">2.1&nbsp;&nbsp;A head 配置</a>
                    
                    
                    
                    <a class="navbar-item" href="#A-branch1-配置">2.2&nbsp;&nbsp;A branch1 配置</a>
                    
                    
                    
                    <a class="navbar-item" href="#A-branch2-x2F-B-head-配置">2.3&nbsp;&nbsp;A branch2 / B head 配置</a>
                    
                    
                    
                    <a class="navbar-item" href="#ISATAP-Tunnel">2.4&nbsp;&nbsp;ISATAP Tunnel</a>
                    
                    
                    
                    <a class="navbar-item" href="#GRE-Tunnel">2.5&nbsp;&nbsp;GRE Tunnel</a>
                    
                    
                    
                    <a class="navbar-item" href="#6to4-Tunnel-and-Realy">2.6&nbsp;&nbsp;6to4 Tunnel and Realy</a>
                    
                    
                    
                    <a class="navbar-item" href="#Manual-Tunnel">2.7&nbsp;&nbsp;Manual Tunnel</a>
                    
                    
                    
                    <a class="navbar-item" href="#6RD-Tunnel">2.8&nbsp;&nbsp;6RD Tunnel</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Test-amp-Observation">3&nbsp;&nbsp;<b>Test &amp;amp;  Observation</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Ending">4&nbsp;&nbsp;<b>Ending</b></a>
                    
                </div>
            </div>
            
            
        </div>
    </div>
</nav>

<section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    
      <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
          
              IPv6 各隧道Tunnel使用Lab
          
      </h1>
    
    
      <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
          <span class="column is-narrow">
              
                  <i class="far fa-clock"></i>
                  <span>&nbspApr 3rd 22&nbsp</span>
              
          </span>
          
          <span class="column is-narrow article-category">
              <i class="far fa-folder"></i>
              <a class="article-category-link" href="/categories/PNETLab/">PNETLab</a>
          </span>
          
          
          <span class="column is-narrow">
              
              
              22 minutes read (About 3340 words)
          </span>
          
      </div>
    
    <!-- add timeliness tips date:20230510 -->
    
      
      
        <div>
          <i class="fa fa-exclamation-triangle"></i> 
          This is an article that was created 420 days ago, and the information may have evolved or changed.  
        </div>
        <br>
      
    
    
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        
        <html><head></head><body><p>最近看了很多关于 IPv6 的内容。老早前，大概2000年前后运营商就开始研究推进发展 IPv6 网络技术了，可能是是由于某些我等不知道的原因，这个推进的进程所演化出的表象让我等普通网民没什么感觉。部分科研机构、高校、金融、IT 大厂已经在使用了，一个比较大的使用群体也就是家用部分普及的不大开（我猜的，没有依据）。</p>
<p>IPv6 相对于 IPv4 有种种的优势，我最有印象的几个是没有广播这个概念、“真 万物互联”、良好的包扩展结构，相对于 IPv4 不存在把什么什么封装进 IPv4  头部后面的字节……巴拉巴拉<span id="more"></span></p>
<p>既然是实验，先上图：</p>
<p><img src="https://s2.loli.net/2022/05/02/WqsFfpynmbOgCe1.png"></p>
<hr>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>介绍一下这个拓扑包含的内容：</p>
<ol>
<li><p><strong>A head</strong> 部分</p>
<ul>
<li>从运营商处申请到 240E:0:0:1500::/60 前缀，互联地址为静态 IPv6 ：240E:0:0:15::</li>
<li>PC 网关在 SW19 / SW20，配置负载分担 （HSRP）；使用 MST ；PC 地址为无状态获取，同时获取除地址外的其他 DHCP 参数</li>
<li>核心交换机与 R5 运行 OSPFv3,</li>
<li>A head 和 A branch1 / A branch2 组建基于 IPv6 的 DMVPN (mGRE)</li>
</ul>
</li>
<li><p><strong>A branch1</strong> 部分</p>
<ul>
<li>从运营商处申请到  2409:0:0:2600::/60  前缀，互联地址为静态 IPv6  2409:0:0:26::</li>
</ul>
</li>
<li><p><strong>A branch2 / B head</strong> 部分</p>
<ul>
<li>使用 PPPOE 拨号接入 ISP ，WAN 动态 IPv6 地址，并且获取到 PD 用于内部网络</li>
</ul>
</li>
<li><p>其他站点如图所示</p>
<ul>
<li>R3 为  ISP IPv4 接入路由器，连接 R3 的三个站点除配置了 Tunnel 外，还支持 NAT 访问互联网</li>
<li>为什么是就配置了这三个站点的 NAT，因为本人电脑内存不够（运行 NAT 的路由器要分配更多内存）</li>
<li>6RD 的站点内部为 IPv6 网络</li>
<li>IPv6 Over IPv4 的 站点互通配置了静态或者动态路由协议</li>
</ul>
</li>
<li><p>为了测试，ISP 网络中均配置了环回接口的 IPv4/IPv6 地址，例如：</p>
<ul>
<li><p>R2</p>
<p>interface Loopback0<br> ip address 10.2.2.2 255.255.255.255<br> ipv6 address 2008::2/128</p>
</li>
</ul>
</li>
<li><p>除 Manual 和 GRE Tunnel 外，站点所有 IPv6 地址均可互通</p>
</li>
</ol>
<hr>
<h2 id="Design-amp-Configuration"><a href="#Design-amp-Configuration" class="headerlink" title="Design &amp; Configuration"></a>Design &amp; Configuration</h2><p><strong>Note：ISP Network 内部运行 OSPF/OSPFv3，不展开说明。</strong></p>
<h3 id="A-head-配置"><a href="#A-head-配置" class="headerlink" title="A head 配置"></a><strong>A head</strong> 配置</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">! -- R5</span><br><span class="line">!</span><br><span class="line">interface Loopback0</span><br><span class="line"> ip address 10.5.5.5 255.255.255.255</span><br><span class="line"> ipv6 address FD00::5/128 // 惟一本地地址，不可在互联上路由</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line">! </span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ipv6 address 240E:0:0:15::5/64 // 与 ISP 互联地址</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/2</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">! </span><br><span class="line">ipv6 router ospf 100</span><br><span class="line"> router-id 10.5.5.5</span><br><span class="line"> default-information originate // OSPFv3 下发默认路由</span><br><span class="line">!</span><br><span class="line">ipv6 route ::/0 240E:0:0:15::1 // 指向 ISP 的默认路由</span><br><span class="line">! -- DMVPN </span><br><span class="line">interface Tunnel1</span><br><span class="line"> description DMVPN_HUB</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 address FD00:A::1/64</span><br><span class="line"> ipv6 eigrp 90</span><br><span class="line"> ipv6 nhrp network-id 100</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode gre multipoint ipv6</span><br><span class="line">!</span><br><span class="line">ipv6 router eigrp 90 // HUB 与 SPOKE 之间运行 EIGRP,IPv6 multicast over mGRE tunnel is not supported.</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:600 Tunnel1 // 手动指邻居</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:700 Tunnel1 // 手动指邻居</span><br><span class="line"> eigrp router-id 10.5.5.5</span><br><span class="line"> redistribute ospf 100 metric 10000 100 255 1 1500 // 重分布 OSPF 进 EIGRP 便于分支站点访问总部网络</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">! -- SW19</span><br><span class="line">!</span><br><span class="line">ipv6 dhcp pool O-POOL // DHCP 参数 </span><br><span class="line"> dns-server 2008::1</span><br><span class="line"> dns-server 2008::2</span><br><span class="line"> domain-name a.com</span><br><span class="line">!</span><br><span class="line">spanning-tree mode mst // mst 配置</span><br><span class="line">spanning-tree mst configuration </span><br><span class="line"> name a.com.hub</span><br><span class="line"> revision 2</span><br><span class="line"> instance 10 vlan 10</span><br><span class="line"> instance 20 vlan 20</span><br><span class="line">!</span><br><span class="line">spanning-tree mst 10 priority 24576 // 实例 10 的主根桥</span><br><span class="line">spanning-tree mst 20 priority 28672 // 实例 20 的备根桥</span><br><span class="line">!</span><br><span class="line">interface Loopback0</span><br><span class="line"> ip address 10.19.19.19 255.255.255.255</span><br><span class="line"> ipv6 address FD00::19/128</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line">!         </span><br><span class="line">interface Port-channel1 // SW19 SW20 之间的端口聚合</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> switchport access vlan 519 // 与 R5 互联端口</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/2</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> channel-group 1 mode active</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/3</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> channel-group 1 mode active</span><br><span class="line">!</span><br><span class="line">interface Vlan10</span><br><span class="line"> no ip address</span><br><span class="line"> standby version 2 // HSRP 配置</span><br><span class="line"> standby 10 ipv6 autoconfig</span><br><span class="line"> standby 10 priority 120 // 优先级120，设置为 Active 端</span><br><span class="line"> standby 10 preempt delay minimum 30 // 抢占延迟 30s</span><br><span class="line"> ipv6 address 240E:0:0:1501::1/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag // O 位</span><br><span class="line"> ipv6 dhcp server O-POOL // 分配给终端 DHCP 其他参数</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">interface Vlan20</span><br><span class="line"> no ip address</span><br><span class="line"> standby version 2</span><br><span class="line"> standby 20 ipv6 autoconfig</span><br><span class="line"> standby 20 preempt delay minimum 30</span><br><span class="line"> ipv6 address 240E:0:0:1502::1/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 dhcp server O-POOL</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">interface Vlan519 // 与 R5 互联建立 OSPFV4 邻居</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">ipv6 router ospf 100</span><br><span class="line"> router-id 10.19.19.19       </span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">! -- SW20</span><br><span class="line">!</span><br><span class="line">ipv6 dhcp pool O-POOL</span><br><span class="line"> dns-server 2008::1</span><br><span class="line"> dns-server 2008::2</span><br><span class="line"> domain-name a.com</span><br><span class="line">!</span><br><span class="line">spanning-tree mode mst</span><br><span class="line">spanning-tree extend system-id</span><br><span class="line">!</span><br><span class="line">spanning-tree mst configuration</span><br><span class="line"> name a.com.hub</span><br><span class="line"> revision 2</span><br><span class="line"> instance 10 vlan 10</span><br><span class="line"> instance 20 vlan 20</span><br><span class="line">!</span><br><span class="line">spanning-tree mst 10 priority 28672</span><br><span class="line">spanning-tree mst 20 priority 24576</span><br><span class="line">!</span><br><span class="line">interface Loopback0</span><br><span class="line"> ip address 10.20.20.20 255.255.255.255</span><br><span class="line"> ipv6 address FD00::20/128</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line">!</span><br><span class="line">interface Port-channel1</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> switchport access vlan 520</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/2</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> channel-group 1 mode passive</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/3</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> channel-group 1 mode passive</span><br><span class="line">!</span><br><span class="line">interface Vlan10</span><br><span class="line"> no ip address</span><br><span class="line"> standby version 2</span><br><span class="line"> standby 10 ipv6 autoconfig</span><br><span class="line"> standby 10 preempt delay minimum 30</span><br><span class="line"> ipv6 address 240E:0:0:1501::2/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 dhcp server O-POOL</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">interface Vlan20</span><br><span class="line"> no ip address</span><br><span class="line"> standby version 2 // HSRP 配置</span><br><span class="line"> standby 20 ipv6 autoconfig</span><br><span class="line"> standby 20 priority 120 // 优先级120，设置为 Active 端</span><br><span class="line"> standby 20 preempt delay minimum 30  // 抢占延迟 30s</span><br><span class="line"> ipv6 address 240E:0:0:1502::2/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 dhcp server O-POOL</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">interface Vlan520</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> ipv6 ospf network point-to-point</span><br><span class="line">!</span><br><span class="line">ipv6 router ospf 100</span><br><span class="line"> router-id 10.20.20.20</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">! -- SW21</span><br><span class="line">!</span><br><span class="line">spanning-tree mode mst</span><br><span class="line">spanning-tree mst configuration</span><br><span class="line"> name a.com.hub</span><br><span class="line"> revision 2</span><br><span class="line"> instance 10 vlan 10</span><br><span class="line"> instance 20 vlan 20</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> switchport trunk allowed vlan 10,20</span><br><span class="line"> switchport trunk encapsulation dot1q</span><br><span class="line"> switchport mode trunk</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/2</span><br><span class="line"> switchport access vlan 10</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/3</span><br><span class="line"> switchport access vlan 20</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="A-branch1-配置"><a href="#A-branch1-配置" class="headerlink" title="A branch1 配置"></a><strong>A branch1</strong> 配置</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">! -- R6</span><br><span class="line">!</span><br><span class="line">ipv6 dhcp pool O-POOL</span><br><span class="line"> dns-server 2008::1</span><br><span class="line"> dns-server 2008::2</span><br><span class="line"> domain-name a.com</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // DMVPN</span><br><span class="line"> description DMVPN_BRANCH_1</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 address FD00:A::2/64</span><br><span class="line"> ipv6 eigrp 90 // EIGRP 启用</span><br><span class="line"> ipv6 nhrp map FD00:A::1/64 240E:0:0:15::5 // 映射 FD00:A::1 R5 的公网 IPv6 地址</span><br><span class="line"> ipv6 nhrp map multicast 240E:0:0:15::5</span><br><span class="line"> ipv6 nhrp network-id 100</span><br><span class="line"> ipv6 nhrp nhs FD00:A::1</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode gre multipoint ipv6</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2409:0:0:26::6/64</span><br><span class="line"> ipv6 address autoconfig default //生成指向 ISP 默认路由</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2409:0:0:2600::6/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 eigrp 90 // EIGRP 启用</span><br><span class="line"> ipv6 dhcp server O-POOL</span><br><span class="line">!</span><br><span class="line">ipv6 router eigrp 90 //运行 EIGRP,IPv6 multicast over mGRE tunnel is not supported.</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:500 Tunnel1  // 手动指邻居</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:700 Tunnel1  // 手动指邻居</span><br><span class="line"> eigrp router-id 10.6.6.6</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="A-branch2-x2F-B-head-配置"><a href="#A-branch2-x2F-B-head-配置" class="headerlink" title="A branch2 / B head 配置"></a><strong>A branch2 / B head</strong> 配置</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">! -- R7</span><br><span class="line">!</span><br><span class="line">ipv6 dhcp pool O-POOL</span><br><span class="line"> dns-server 2008::1</span><br><span class="line"> dns-server 2008::2</span><br><span class="line"> domain-name a.com</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // DMVPN</span><br><span class="line"> description DMVPN_BRANCH_2</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 address FD00:A::3/64</span><br><span class="line"> ipv6 eigrp 90  // EIGRP 启用</span><br><span class="line"> ipv6 nhrp map FD00:A::1/64 240E:0:0:15::5</span><br><span class="line"> ipv6 nhrp map multicast 240E:0:0:15::5</span><br><span class="line"> ipv6 nhrp network-id 100</span><br><span class="line"> ipv6 nhrp nhs FD00:A::1</span><br><span class="line"> tunnel source Dialer1 // 出接口为 Dialer </span><br><span class="line"> tunnel mode gre multipoint ipv6</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> pppoe enable group global</span><br><span class="line"> pppoe-client dial-pool-number 1</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address INTRA_PD ::7/64 // 使用获取到的前缀配置接口IPv6地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 eigrp 90  // EIGRP 启用</span><br><span class="line"> ipv6 dhcp server O-POOL // DHCP 参数下发</span><br><span class="line">!</span><br><span class="line">interface Dialer1 // PPPOE 拨号</span><br><span class="line"> mtu 1492</span><br><span class="line"> no ip address</span><br><span class="line"> encapsulation ppp</span><br><span class="line"> dialer pool 1</span><br><span class="line"> dialer-group 1</span><br><span class="line"> ipv6 address dhcp</span><br><span class="line"> ipv6 address autoconfig default</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 mtu 1492</span><br><span class="line"> ipv6 dhcp client pd INTRA_PD //获取前缀，命名 INTRA_PD</span><br><span class="line"> ppp authentication pap callin</span><br><span class="line"> ppp pap sent-username user1 password 0 user1</span><br><span class="line">!</span><br><span class="line">ipv6 router eigrp 90 // 运行 EIGRP,IPv6 multicast over mGRE tunnel is not supported.</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:500 Tunnel1  // 手动指邻居</span><br><span class="line"> neighbor FE80::A8BB:CCFF:FE00:600 Tunnel1  // 手动指邻居</span><br><span class="line"> eigrp router-id 10.7.7.7</span><br><span class="line">!</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">! -- R8</span><br><span class="line">ipv6 dhcp pool O-POOL</span><br><span class="line"> dns-server 2008::1</span><br><span class="line"> dns-server 2008::2</span><br><span class="line"> domain-name b.com</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> pppoe enable group global</span><br><span class="line"> pppoe-client dial-pool-number 1</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address INTRA_PD ::8/64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 nd other-config-flag</span><br><span class="line"> ipv6 dhcp server O-POOL // DHCP 参数下发</span><br><span class="line">!</span><br><span class="line">interface Dialer1</span><br><span class="line"> mtu 1492</span><br><span class="line"> no ip address</span><br><span class="line"> encapsulation ppp</span><br><span class="line"> dialer pool 1</span><br><span class="line"> dialer-group 1</span><br><span class="line"> ipv6 address dhcp</span><br><span class="line"> ipv6 address autoconfig default</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 mtu 1492</span><br><span class="line"> ipv6 dhcp client pd INTRA_PD</span><br><span class="line"> ppp authentication pap callin</span><br><span class="line"> ppp pap sent-username user2 password 0 user2</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">! -- R2 PPPOE SERVER</span><br><span class="line">!</span><br><span class="line">ipv6 dhcp pool DHCPV6POOL //配置 PD 池</span><br><span class="line"> prefix-delegation pool POOL-2</span><br><span class="line">!</span><br><span class="line">username user1 password 0 user1  // 用于 PPPOE 拨号认证</span><br><span class="line">username user2 password 0 user2  // 用于 PPPOE 拨号认证</span><br><span class="line">!</span><br><span class="line">bba-group pppoe GROUP-1</span><br><span class="line"> virtual-template 1 // 绑定模版1</span><br><span class="line">!</span><br><span class="line">interface Loopback11  // 这个地址用于复用，不知道Cisco为什么这般设计，直接在模版下配不就行了</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 address 2409:0:0:2::2/60</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 enable</span><br><span class="line"> pppoe enable group GROUP-1 // 调用</span><br><span class="line">!</span><br><span class="line">interface Virtual-Template1</span><br><span class="line"> description PPPOE-GROUP-1</span><br><span class="line"> mtu 1492</span><br><span class="line"> no ip address</span><br><span class="line"> peer default ipv6 pool PPPOE-PEER-POOL // 为拨号客户端对端配置 IPv6 的地址</span><br><span class="line"> ipv6 unnumbered Loopback11 // 复用</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 mtu 1492</span><br><span class="line"> ipv6 nd managed-config-flag</span><br><span class="line"> no ipv6 nd ra suppress </span><br><span class="line"> ipv6 dhcp server DHCPV6POOL // PD 下发</span><br><span class="line"> ppp authentication pap</span><br><span class="line">!</span><br><span class="line">ipv6 local pool POOL-2 2409:0:0:2780::/60 64</span><br><span class="line">ipv6 local pool PPPOE-PEER-POOL 2409:0:0:2220::/60 64</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ISATAP-Tunnel"><a href="#ISATAP-Tunnel" class="headerlink" title="ISATAP Tunnel"></a>ISATAP Tunnel</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">! -- R9</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // ISATAP Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 address 2409:0:0:2900::/64 eui-64</span><br><span class="line"> ipv6 enable</span><br><span class="line"> no ipv6 nd ra suppress</span><br><span class="line"> tunnel source Ethernet0/1</span><br><span class="line"> tunnel mode ipv6ip isatap</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2409:0:0:29::9/64</span><br><span class="line"> ipv6 enable</span><br><span class="line">!         </span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ip address 192.168.9.254 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">ipv6 route ::/0 2409:0:0:29::2</span><br><span class="line">! </span><br></pre></td></tr></tbody></table></figure>

<h3 id="GRE-Tunnel"><a href="#GRE-Tunnel" class="headerlink" title="GRE Tunnel"></a>GRE Tunnel</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">! -- R15</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // GRE Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel destination 200.1.103.10  // R10 WAN 地址</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.154.15 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ip address 192.168.15.254 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address FD00:F::F/64 // 惟一本地地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line">!</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.154.4</span><br><span class="line">!</span><br><span class="line">ipv6 router ospf 100</span><br><span class="line"> router-id 10.15.15.15</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">! -- R10</span><br><span class="line">! </span><br><span class="line">interface Tunnel1  // GRE Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel destination 200.1.154.15  // R15 WAN 地址</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.103.10 255.255.255.0</span><br><span class="line"> ip nat outside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ip address 192.168.10.254 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address FD00:A::A/64  // 惟一本地IPv6地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 ospf 100 area 0</span><br><span class="line">!</span><br><span class="line">ip nat inside source list 10 interface Ethernet0/0 overload // IPv4 NAT</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.103.3</span><br><span class="line">!</span><br><span class="line">ipv6 router ospf 100</span><br><span class="line"> router-id 10.10.10.10</span><br><span class="line">!</span><br><span class="line">access-list 10 permit 192.168.10.0 0.0.0.255</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="6to4-Tunnel-and-Realy"><a href="#6to4-Tunnel-and-Realy" class="headerlink" title="6to4 Tunnel and Realy"></a>6to4 Tunnel and Realy</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">! -- R14 </span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // 6to4 Tunnel </span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 unnumbered Ethernet0/0</span><br><span class="line"> ipv6 enable</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip 6to4</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.144.14 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2408:0:0:E4::E/64 // 与 R4 互联的 IPv6 地址</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2002:C801:900E::E/64 // 6to4 地址</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.144.4</span><br><span class="line">!</span><br><span class="line">ipv6 route 2002::/16 Tunnel1 // 站点互通</span><br><span class="line">ipv6 route ::/0 2408:0:0:E4::4 // 访问 ISP IPv6 网络</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">! -- R11</span><br><span class="line">!</span><br><span class="line">interface Tunnel1  // 6to4 Tunnel </span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 enable</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip 6to4</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.113.11 255.255.255.0</span><br><span class="line"> ip nat outside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ip address 192.168.11.254 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2002:C801:710B::B/64  // 6to4 地址</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">ip nat inside source list 10 interface Ethernet0/0 overload // IPv4 NAT</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.113.3</span><br><span class="line">!</span><br><span class="line">ipv6 route 2002::/16 Tunnel1 // 站点互通</span><br><span class="line">ipv6 route ::/0 2002:C801:900E::E // 访问IPv6 互联 下一跳 到 R14 中继 转发</span><br><span class="line">!</span><br><span class="line">access-list 10 permit 192.168.11.0 0.0.0.255</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Manual-Tunnel"><a href="#Manual-Tunnel" class="headerlink" title="Manual Tunnel"></a>Manual Tunnel</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">! -- R13</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // Manual Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 rip RIPNG enable // 启用 RIPNG</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip</span><br><span class="line"> tunnel destination 200.1.123.12</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.134.13 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address FC00:D::D/64 // 惟一本地IPv6地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 rip RIPNG enable // 启用 RIPNG</span><br><span class="line">!</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.134.4</span><br><span class="line">!</span><br><span class="line">ipv6 router rip RIPNG // 站点互通 RIPNG</span><br><span class="line">! </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">! -- R12</span><br><span class="line">!</span><br><span class="line">interface Tunnel1  // Manual Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 rip RIPNG enable  // 启用 RIPNG</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip</span><br><span class="line"> tunnel destination 200.1.134.13</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.123.12 255.255.255.0</span><br><span class="line"> ip nat outside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> ip address 192.168.12.254 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line"> ip virtual-reassembly in</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address FC00:C::C/64 // 惟一本地IPv6地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> ipv6 rip RIPNG enable</span><br><span class="line">!</span><br><span class="line">ip nat inside source list 10 interface Ethernet0/0 overload  // IPv4 NAT</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.123.3</span><br><span class="line">!</span><br><span class="line">ipv6 router rip RIPNG  // 站点互通 RIPNG</span><br><span class="line">!</span><br><span class="line">access-list 10 permit 192.168.12.0 0.0.0.255</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="6RD-Tunnel"><a href="#6RD-Tunnel" class="headerlink" title="6RD Tunnel"></a>6RD Tunnel</h3><figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">! -- R16</span><br><span class="line">!</span><br><span class="line">ipv6 general-prefix 6RD 6rd Tunnel1 // 从Tunnel 1 获取 ISP 通用前缀 命名为6RD</span><br><span class="line">!</span><br><span class="line">interface Tunnel1 // 6RD Tunnel</span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 address 6RD ::/128 // 通过命名为6RD 的通用前缀构建 IPv6 地址</span><br><span class="line"> ipv6 enable</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip 6rd  // 模式</span><br><span class="line"> tunnel 6rd ipv4 prefix-len 16 // IPv4 通用前缀 ，不设置通用后缀</span><br><span class="line"> tunnel 6rd prefix 2408:1617::/32 //ISP 设定的 IPv6 前缀</span><br><span class="line"> tunnel 6rd br 200.1.4.4 // BR 地址，位于 ISP</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.164.16 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2408:1617:A410:F::F/64 // 通过 ISP 设定的前缀 + IPv4 通用前缀构造，IPv4通用前缀占去16位，而通用后缀没有设置，所以就是164.16，转16进制</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.164.4</span><br><span class="line">!</span><br><span class="line">ipv6 route 2408:1617::/32 Tunnel1 // 站点互访</span><br><span class="line">ipv6 route ::/0 Tunnel1 2408:1617:404:: // 访问 IPv6 互联网</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">! -- R17</span><br><span class="line">!</span><br><span class="line">ipv6 general-prefix 6RD 6rd Tunnel1</span><br><span class="line">!</span><br><span class="line">interface Tunnel1</span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 address 6RD ::/128</span><br><span class="line"> ipv6 enable</span><br><span class="line"> tunnel source Ethernet0/0</span><br><span class="line"> tunnel mode ipv6ip 6rd</span><br><span class="line"> tunnel 6rd ipv4 prefix-len 16</span><br><span class="line"> tunnel 6rd prefix 2408:1617::/32</span><br><span class="line"> tunnel 6rd br 200.1.4.4</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/0</span><br><span class="line"> ip address 200.1.174.17 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line">!</span><br><span class="line">interface Ethernet0/1</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> ipv6 address 2408:1617:AE11:11::11/64 // // 通过 ISP 设定的前缀 + IPv4 通用前缀构造，IPv4通用前缀占去16位，而通用后缀没有设置，所以就是174.17，转16进制</span><br><span class="line"> ipv6 enable</span><br><span class="line">!</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 200.1.174.4</span><br><span class="line">!</span><br><span class="line">ipv6 route 2408:1617::/32 Tunnel1</span><br><span class="line">ipv6 route ::/0 Tunnel1 2408:1617:404::</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">! -- R4</span><br><span class="line">!</span><br><span class="line">ipv6 general-prefix 6RD 6rd Tunnel1</span><br><span class="line">!</span><br><span class="line">interface Loopback1</span><br><span class="line"> ip address 200.1.4.4 255.255.255.255</span><br><span class="line">!</span><br><span class="line">interface Tunnel1</span><br><span class="line"> no ip address</span><br><span class="line"> no ip redirects</span><br><span class="line"> ipv6 address 6RD ::/128</span><br><span class="line"> ipv6 enable</span><br><span class="line"> tunnel source Loopback1 // 指定源，6RD 网络 IPv4 可达，还有一种说法是，可以配置anycast，6RD 网络就近访问</span><br><span class="line"> tunnel mode ipv6ip 6rd</span><br><span class="line"> tunnel 6rd ipv4 prefix-len 16</span><br><span class="line"> tunnel 6rd prefix 2408:1617::/32</span><br><span class="line">!</span><br><span class="line">ipv6 route 2408:1617::/32 Tunnel1 // 站点访问IPv6 网络 返回流量</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h2 id="Test-amp-Observation"><a href="#Test-amp-Observation" class="headerlink" title="Test &amp;  Observation"></a>Test &amp;  Observation</h2><p><strong>PC 23</strong> </p>
<ul>
<li>ping  PC 24</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/wdq98eSpnQIomMu.png"></p>
<ul>
<li>ping  R5  Loopback0</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/pNRlmzbMueHx4ci.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R3  Loopback0</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/T6NrPOZoiJQsqcG.png"></p>
<ul>
<li>ping  位于 A branch1 的 PC 25</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/KZQrajkhO8iqm2R.png"></p>
<ul>
<li>ping  位于 B head 的 PC 26</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/3FZM1b8tQGxf7js.png"></p>
<ul>
<li>ping  位于 6to4 Tunnel site2 的 PC 28</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/zGR5jO2XhyDNk9w.png"></p>
<ul>
<li>ping  位于 6RD Tunnel site1 的 PC 30</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/pt6MgExKAVrh7Jc.png"></p>
<p><strong>PC 25</strong></p>
<ul>
<li>ping  位于 A head 的 PC 24</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/EiJG1AeWxF2Chwp.png"></p>
<ul>
<li>ping  位于 A branch2 的 E0/1 接口</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/lCnirqdHXLAPzOI.png"></p>
<p><strong>PC 26</strong></p>
<ul>
<li>ping  位于 ISP Network 的 R4  Loopback0</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/CpJV95worZjDeq6.png"></p>
<ul>
<li>ping  位于 A head 的 PC 24</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/Pogt8efnYlw7hVS.png"></p>
<ul>
<li>ping  位于 6RD Tunnel site1 的 PC 30</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/OgaZPtVnw1ovWqm.png"></p>
<p><strong>PC 27</strong></p>
<ul>
<li>ping GRE Tunnel site1 的 E0/1 接口</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/dJxVzWU75PaS4pM.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R1  Loopback0 （IPv4）</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/4kKtLZCPviFn1XE.png"></p>
<p><strong>PC 28</strong></p>
<ul>
<li>ping  位于 6to4 Tunnel site1 E0/1 接口</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/UrGM7mXeSuRFJOx.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R1  Loopback0 （IPv6）</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/LSMXYa1GTCRV85A.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R1  Loopback0 （IPv4）</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/kjEiPofQ8HVKc3t.png"></p>
<p><strong>PC 29</strong></p>
<ul>
<li>ping  位于 Manual Tunnel site1 E0/1 接口</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/kfljUI6ZwMCFcBm.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R1  Loopback0 （IPv4）</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/MvtomBCDQfGwuZ9.png"></p>
<p><strong>PC 30</strong></p>
<ul>
<li>ping  位于 6RD Tunnel site2 E0/1 接口</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/b9VUl7PrZRnWM1K.png"></p>
<ul>
<li>ping  位于 ISP Network 的 R1  Loopback0 （IPv6）</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/03/x8Bg5QzJmsL6fUP.png"></p>
<hr>
<h2 id="Ending"><a href="#Ending" class="headerlink" title="Ending"></a>Ending</h2><ul>
<li>文中可能有些配置未提及或内容术语表述的不规范，请见谅。</li>
<li>配置存阿里云盘了，这是链接：[<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/L2WMMmcVR1A">分享的文件</a>]</li>
<li>欢迎“<del>来电</del>”来函探讨。</li>
</ul>
</body></html>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Network-Emulator/">#Network Emulator</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/PNETLab/">#PNETLab</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Cisco/">#Cisco</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/IPv6/">#IPv6</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/PD/">#PD</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Manual-Tunnel/">#Manual Tunnel</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/6to4-Tunnel/">#6to4 Tunnel</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/GRE-Tunnel/">#GRE Tunnel</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/6RD-Tunnel/">#6RD Tunnel</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/ISATAP-Tunnel/">#ISATAP Tunnel</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/mGRE/">#mGRE</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/posts/a89a05d3.html">HCL_FW_IRF_LAB</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/posts/48f55792.html">BGP综合实验拓扑</a>
            
        </span>
    </div>
    
</article>
<!-- 
DO NOT APPLY SHAREBOX

<div class="sharebox">
    
<div class="notification is-danger">
    You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.
</div>

</div>

DO NOT APPLY COMMENTS

<div class="comments">
    <h3 class="title is-4">Comments</h3>
    
<div id="disqus_thread">
    
    <div class="notification is-danger">
        You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.
    </div>
    
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

-->
    </div>
</section>
<footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2023 Kir Aster&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
<div id="totop" class="ctotop">
<a title="返回顶部"><img src="/images/scrollup.png"/></a>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery > p > .gallery-item').unwrap();
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    
    
    
    

    



<script src="/js/script.js"></script>


<script src="/js/totop.js"></script>


<div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>


</body>
</html>